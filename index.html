<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Ventas</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; background: #f4f7f6; padding: 20px; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 350px; margin: auto; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        button { width: 100%; padding: 14px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; margin-top: 10px; }
        .btn-azul { background: #003366; color: white; }
        .btn-verde { background: #28a745; color: white; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="card" id="box-auth">
        <h2 id="etiqueta" style="color:#003366;">Acceso Telcel</h2>
        <div id="form-login">
            <input type="email" id="email-l" placeholder="Correo">
            <input type="password" id="pass-l" placeholder="Contraseña">
            <button class="btn-azul" onclick="login()">ENTRAR</button>
            <p onclick="recuperar()" style="color:blue; font-size:12px; cursor:pointer;">¿Olvidaste tu contraseña?</p>
            <hr>
            <button class="btn-verde" onclick="mostrarR()">NUEVO PROMOTOR</button>
        </div>
        <div id="form-reg" class="hidden">
            <p>Reporte para: <strong>02/02/2026</strong></p>
            <input type="email" id="email-r" placeholder="Nuevo Correo">
            <input type="password" id="pass-r" placeholder="Nueva Contraseña">
            <button class="btn-verde" onclick="registrar()">REGISTRAR AHORA</button>
            <button onclick="mostrarL()" style="background:#ccc;">VOLVER</button>
        </div>
    </div>
    <div class="card hidden" id="box-app">
        <h2>Panel de Ventas</h2>
        <p id="info-user"></p>
        <p>Fecha Activa: 02/02/2026</p>
        <button onclick="location.reload()" style="background:#666; color:white;">SALIR</button>
    </div>
    <script>
        // RECUERDA PONER AQUÍ TU CONFIGURACIÓN DE FIREBASE
        const firebaseConfig = {
            apiKey: "TU_API_KEY",
            authDomain: "TU_PROYECTO.firebaseapp.com",
            databaseURL: "https://TU_PROYECTO.firebaseio.com",
            projectId: "TU_PROYECTO",
            storageBucket: "TU_PROYECTO.appspot.com",
            messagingSenderId: "ID",
            appId: "ID"
        };
        firebase.initializeApp(firebaseConfig);
        const base = firebase.database();

        function mostrarR() { document.getElementById('form-login').classList.add('hidden'); document.getElementById('form-reg').classList.remove('hidden'); }
        function mostrarL() { document.getElementById('form-reg').classList.add('hidden'); document.getElementById('form-login').classList.remove('hidden'); }

        function registrar() {
            const e = document.getElementById('email-r').value;
            const p = document.getElementById('pass-r').value;
            if(e && p) {
                base.ref('promotores/' + e.replace(/\./g, '_')).set({clave:p, fecha:"02/02/2026"}).then(() => {
                    localStorage.setItem(e, p); [cite: 2026-02-06]
                    alert("¡Guardado! Ya puedes entrar.");
                    mostrarL();
                });
            } else { alert("Llena los campos"); }
        }

        function login() {
            const e = document.getElementById('email-l').value;
            const p = document.getElementById('pass-l').value;
            base.ref('promotores/' + e.replace(/\./g, '_')).once('value').then(s => {
                if(s.exists() && s.val().clave === p) {
                    document.getElementById('box-auth').classList.add('hidden');
                    document.getElementById('box-app').classList.remove('hidden');
                    document.getElementById('info-user').innerText = e;
                } else { alert("Datos incorrectos o usuario no registrado"); }
            });
        }

        function recuperar() {
            const e = document.getElementById('email-l').value;
            if(!e) return alert("Escribe tu correo arriba");
            base.ref('promotores/' + e.replace(/\./g, '_')).once('value').then(s => {
                if(s.exists()) alert("Tu clave es: " + s.val().clave);
                else alert("Correo no encontrado");
            });
        }
    </script>
</body>
</html>
