<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema Ventas Telcel Pro</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{
font-family: Arial;
background:#0f172a;
color:white;
padding:20px;
}

input,select,button{
padding:8px;
margin:5px 0;
border-radius:5px;
border:none;
}

button{
background:#0a84ff;
color:white;
cursor:pointer;
}

table{
width:100%;
margin-top:20px;
border-collapse:collapse;
}

th,td{
border:1px solid #333;
padding:8px;
text-align:center;
}

th{
background:#1e293b;
}

.deleteBtn{
background:red;
}
</style>
</head>
<body>

<h2>Sistema Ventas Telcel Pro</h2>

<input type="text" id="nombre" placeholder="Nombre Cliente">
<input type="text" id="numero" placeholder="NÃºmero">
<input type="text" id="plan" placeholder="Plan">
<input type="text" id="equipo" placeholder="Equipo">
<input type="text" id="pago" placeholder="Pago">
<input type="text" id="ak" placeholder="AK">

<button onclick="guardarVenta()">Guardar Venta</button>

<h3>Ventas Registradas</h3>

<table>
<thead>
<tr>
<th>Nombre</th>
<th>NÃºmero</th>
<th>Plan</th>
<th>Equipo</th>
<th>Pago</th>
<th>AK</th>
<th>Eliminar</th>
</tr>
</thead>
<tbody id="tablaVentas"></tbody>
</table>

<!-- BOTÃ“N CHAT -->
<button onclick="toggleChat()" style="
position:fixed;
bottom:20px;
right:20px;
background:#0a84ff;
color:white;
border:none;
padding:12px;
border-radius:50%;
font-size:18px;
">
ðŸ’¬
</button>

<!-- CHAT -->
<div id="chatBox" style="
display:none;
position:fixed;
bottom:80px;
right:20px;
width:300px;
height:400px;
background:#1e293b;
border-radius:10px;
overflow:hidden;
flex-direction:column;
">

<div style="background:#0a84ff;padding:10px;text-align:center;">
Chat Promotores ðŸŸ¢
</div>

<div id="mensajes" style="
flex:1;
overflow-y:auto;
padding:10px;
font-size:14px;
"></div>

<div style="display:flex;">
<input type="text" id="mensajeInput" style="flex:1;border:none;padding:8px;">
<button onclick="enviarMensaje()">Enviar</button>
</div>

</div>

<script>

// ðŸ”¥ VENTAS LOCAL
let ventas = JSON.parse(localStorage.getItem("ventas")) || [];

function guardarVenta(){

let venta = {
nombre: document.getElementById("nombre").value,
numero: document.getElementById("numero").value,
plan: document.getElementById("plan").value,
equipo: document.getElementById("equipo").value,
pago: document.getElementById("pago").value,
ak: document.getElementById("ak").value
};

ventas.push(venta);
localStorage.setItem("ventas", JSON.stringify(ventas));
mostrarVentas();
limpiar();
}

function mostrarVentas(){
let tabla = document.getElementById("tablaVentas");
tabla.innerHTML = "";

ventas.forEach((v,i)=>{
tabla.innerHTML += `
<tr>
<td>${v.nombre}</td>
<td>${v.numero}</td>
<td>${v.plan}</td>
<td>${v.equipo}</td>
<td>${v.pago}</td>
<td>${v.ak}</td>
<td><button class="deleteBtn" onclick="eliminarVenta(${i})">X</button></td>
</tr>
`;
});
}

function eliminarVenta(i){
ventas.splice(i,1);
localStorage.setItem("ventas", JSON.stringify(ventas));
mostrarVentas();
}

function limpiar(){
document.getElementById("nombre").value="";
document.getElementById("numero").value="";
document.getElementById("plan").value="";
document.getElementById("equipo").value="";
document.getElementById("pago").value="";
document.getElementById("ak").value="";
}

mostrarVentas();


// ðŸ”¥ FIREBASE CONFIG
var firebaseConfig = {
apiKey: "TU_CONFIG_AQUI",
authDomain: "TU_CONFIG_AQUI",
databaseURL: "TU_CONFIG_AQUI",
projectId: "TU_CONFIG_AQUI",
storageBucket: "TU_CONFIG_AQUI",
messagingSenderId: "TU_CONFIG_AQUI",
appId: "TU_CONFIG_AQUI"
};

firebase.initializeApp(firebaseConfig);
var database = firebase.database();

// ðŸ”¥ CHAT
function toggleChat(){
let chat = document.getElementById("chatBox");
chat.style.display = chat.style.display === "none" ? "flex" : "none";
}

function enviarMensaje(){
let texto = document.getElementById("mensajeInput").value;
if(texto==="") return;

database.ref("chat").push({
mensaje:texto,
hora: Date.now()
});

document.getElementById("mensajeInput").value="";
}

database.ref("chat").on("child_added", function(snapshot){
let data = snapshot.val();
let mensajes = document.getElementById("mensajes");

mensajes.innerHTML += `<div>${data.mensaje}</div>`;
mensajes.scrollTop = mensajes.scrollHeight;
});

</script>

</body>
</html>